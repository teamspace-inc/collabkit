import { DocDemoContainer } from '../Doc';
import { SidebarCommentsDemo } from '../demos/SidebarDemo';
import Usage from './usage/CollabKitProviderUsage.tsx?raw';
import { renderCodeSnippet } from '../CodeEditor';
import { AdvancedProps } from '../advanced/AdvancedCommon';
import { DocLink } from '../Doc';

# CollabKitProvider

## Setup commenting with our Provider.

`CollabKitProvider` is the React context provider that handles authentication and data sync with CollabKit's servers. All CollabKit components fetch data from it.

### Usage

The following example shows how to setup{' '} <code className="ReactNode">CollabKitProvider</code> for your app. Copy the code below into your root <code className="ReactNode">App</code> component.

Because it handles data sync we recommend placing it in your apps root component (or as close as possible to it) so it does not unmount while a user is using your app.

{renderCodeSnippet(Usage)}

### Props

<AdvancedProps
  props={[
    ['appId', 'string', 'Your CollabKit App ID'],
    ['apiKey', 'string', 'Your CollabKit API Key'],
    [
      'theme',
      <>
        'light' |<br /> 'dark' |<br /> CustomTheme
      </>,
      'The theme to use',
    ],
    ['user', 'User', <>Authenticated user</>],
    [
      'workspace',
      'Workspace',
      <>
        User's <DocLink to="/docs/workspaces">Workspace</DocLink>
      </>,
    ],
    [
      'mentionableUsers',
      `Mention[] | 'allWorkspace'`,
      <>
        Array of users that can be mentioned in comments or <code>'allWorkspace'</code>
        (each user in the same workspace)
      </>,
    ],
    [
      `onPinAttach`,
      <>
        {`(props: {`}
        <br />
        {`objectId: string;`}
        <br />
        {`userId: string;`}
        <br />
        {`workspaceId: string;`}
        <br />
        {`threadId: string;}) => string`}
      </>,
      <>
        Called when a user attaches a new pin to a part of your app's UI. <br />
        <br />
        The callback should return a string which represents the state of your app's UI at that
        point in time. <br />
        <br />
        This string will be passed to your app when a user clicks on a pin so you can navigate and
        restore the UI to the state it was in when the pin was created.
      </>,
    ],
    [
      `onPinClick`,
      <>
        {`(props: {`}
        <br />
        {`objectId: string;`}
        <br />
        {`userId: string;`}
        <br />
        {`workspaceId: string;`}
        <br />
        {`meta: string | null;`}
        <br />
        {`threadId: string;}) => void`}
      </>,
      <>
        Called when a user clicks on a pin.
        <br />
        <br />
        <code>meta</code> is the string returned by your apps <code>onPinAttach</code> callback.
        <br />
        <br />
        You can use this to navigate to the state of your app that was saved when the pin was
        attached.
      </>,
    ],
  ]}
/>
